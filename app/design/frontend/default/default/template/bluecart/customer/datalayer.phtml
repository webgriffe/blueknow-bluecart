<?php
/**
 * Template for Blueknow_Bluecart_Block_Home_Recommmender.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Blueknow Bluecart
 * extension to newer versions in the future. If you wish to customize it for
 * your needs please save your changes before upgrading.
 *
 * @category	design
 * @copyright	Copyright (c) 2016 Blueknow, S.L. (http://www.blueknow.com)
 * @license		GNU General Public License
 * @author		<a href="mailto:santi.ameller@blueknow.com">Santiago Ameller</a>
 * @author		<a href="mailto:josep.ventura@blueknow.com">Josep M Ventura</a>
 * @since		1.0.0
 *
 */
?>
<?php $bConfiguration = $this->getConfiguration() ?>

<?php $bUser = $this->getUser() ?>

<script type="text/javascript">
	window.blueCart = window.blueCart || {};
	window.blueCart.data = window.blueCart.data || {};
	window.blueCart.data.currency= "<?php echo $bUser->getCurrency() ?>";
	window.blueCart.data.language= "<?php echo $bUser->getLanguage() ?>";
	window.blueCart.data.logged= <?php echo json_encode($bUser->isLogged()) ?>;
	window.blueCart.data.cart_empty= <?php echo json_encode($bUser->isCartEmpty()) ?>;
	window.blueCart.data.v= "<?php echo $bConfiguration->getModuleVersion() ?>";
	<?php if($bUser->isLogged()) { ?>	
	window.blueCart.data.user = {
		email: "<?php echo $bUser->getEmail() ?>",
		first_name:	"<?php echo $bUser->getFirstName() ?>",
		last_name: "<?php echo $bUser->getLastName() ?>",
		phone: "<?php echo $bUser->getPhone() ?>"
	};
	<?php } ?>
</script>

<script type="text/javascript">
    (function () {
    	window.blueCart = window.blueCart || {};
	    window.blueCart.bkNumber= "<?php echo $bConfiguration->getBKNumber() ?>";
        var b = document.createElement("script");
        b.type = "text/javascript";
        b.async = !0;
        var c = ("https:" == document.location.protocol ?
                 "https://d2cmqkwo8rxlr9.cloudfront.net" :
                 "http://static-rmk.blueknow.com") + "/bk-rmk.js?cac=",
            d = new Date,
            a = d.getFullYear().toString() + (d.getMonth() + 1) + d.getDate() + d.getHours();
        b.src = c + a;
        c = document.getElementsByTagName("script")[0];
        c.parentNode.insertBefore(b, c);
    })();
</script>